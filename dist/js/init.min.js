function Widget(){this.addPreloader=function(){0===$(".mnv-preloader-overlay",this.el).length&&$("<div class='mnv-preloader-overlay'></div>").appendTo(this.el),0===$(".mnv-preloader-loader",this.el).length&&$("<div class='mnv-preloader-loader'></div>").appendTo(this.el)},this.removePreloader=function(){$(".mnv-preloader-loader",this.el).fadeOut(200,function(){$(this).remove(),$(".mnv-preloader-overlay",this.el).fadeOut(300,function(){$(this).remove()})})},this.bindEvent=function(){var a=this;this.el.on("loading",function(){a.addPreloader()}),this.el.on("loaded",function(){a.removePreloader()})}}function ecStoryTilesReveal(){$.extend(this,ecStoryTilesRevealConfig)}!function(){var a="@font-face{font-family:'NeutraText-Bold';src:url('../fonts/NeutraText-Bold.eot');src:url('../fonts/NeutraText-Bold.eot') format('embedded-opentype'),url('../fonts/NeutraText-Bold.woff') format('woff'),url('../fonts/NeutraText-Bold.ttf') format('truetype'),url('../fonts/NeutraText-Bold.svg#NeutraText-Bold') format('svg');font-weight:normal;font-style:normal;}@font-face{font-family:'NeutraText-Book';src:url('../fonts/NeutraText-Book.eot');src:url('../fonts/NeutraText-Book.eot') format('embedded-opentype'),url('../fonts/NeutraText-Book.woff') format('woff'),url('../fonts/NeutraText-Book.ttf') format('truetype'),url('../fonts/NeutraText-Book.svg#NeutraText-Book') format('svg');font-weight:normal;font-style:normal;}html,body{width:100%;height:100%;margin:0;padding:0;overflow:hidden;-webkit-font-smoothing:antialiased !important;}.mnv-ec-storytilesreveal{height:100%;font-family:NeutraText-Book;}ul,li{list-style:none;margin:0;padding:0;}html{box-sizing:border-box;}*,*:before,*:after{box-sizing:inherit;}.main-container{position:relative;margin:0 auto;height:100%;}.depth-top{z-index:1000;}.depth-bottom{z-index:1;}.active{visibility:visible !important;overflow-y:scroll !important;}.inactive{visibility:hidden !important;overflow:hidden !important;}.article-reveal-container{display:block;position:absolute;top:0;width:100%;height:100%;transition-delay:0s,0.5s,1s,1.5s;transform:translate(0%,0%);perspective:4000px;overflow-y:scroll;overflow-x:hidden;}ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;flex-wrap:wrap;flex-direction:row;}.article-container{max-width:1220px;height:100%;width:100%;margin:0 auto;overflow-y:scroll;}.artical-reveal-tile{cursor:pointer;position:relative;color:#fff;font-size:20px;text-align:center;-webkit-transition:all 0.5s ease-in-out;-moz-transition:all 0.5s ease-in-out;-o-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out;flex:1;background-color:rgba(255,0,0,0.5);border-bottom:4px solid #000;opacity:1;overflow:hidden;}.artical-reveal-tile .section,.artical-reveal-tile .title,.artical-reveal-tile .rubrik{z-index:2;font-size:20px;color:#25E3D0;position:absolute;text-transform:uppercase;top:20px;left:20px;text-shadow:2px 2px 3px rgba(0,0,0,0.5);text-align:left;}@media (max-width: 480px){.artical-reveal-tile .section,.artical-reveal-tile .title,.artical-reveal-tile .rubrik{font-size:20px;}}.artical-reveal-tile .title{top:40px;font-size:32px;font-family:NeutraText-Bold;color:#fff;}@media (max-width: 480px){.artical-reveal-tile .title{top:40px;font-size:30px;}}.artical-reveal-tile .rubrik{font-size:16px;top:90px;text-transform:initial;color:#fff;}.artical-reveal-tile .image{position:absolute;top:0;left:0;width:100%;height:auto;}.cover{position:relative;min-width:100%;}.cover:before{display:block;content:'';width:100%;padding-top:56.25%;}.cover>.content{position:absolute;top:0;left:0;right:0;bottom:0;}.full{min-width:100%;position:relative;}.full:before{display:block;content:'';width:100%;padding-top:25%;}.full>.content{position:absolute;top:0;left:0;right:0;bottom:0;}.full .image-grad{width:100%;height:100%;background:-moz-linear-gradient(left,black 0%,rgba(0,0,0,0) 100%);background:-webkit-gradient(linear,left top,right top,color-stop(0%,black),color-stop(100%,rgba(0,0,0,0)));background:-webkit-linear-gradient(left,black 0%,rgba(0,0,0,0) 100%);background:-o-linear-gradient(left,black 0%,rgba(0,0,0,0) 100%);background:-ms-linear-gradient(left,black 0%,rgba(0,0,0,0) 100%);background:linear-gradient(to right,black 0%,rgba(0,0,0,0) 100%);position:absolute;top:0;left:0;z-index:1;width:60%;height:100%;opacity:0.8;}.quarter{min-width:25%;position:relative;}.quarter:before{display:block;content:'';width:100%;padding-top:75%;}.quarter>.content{position:absolute;top:0;left:0;right:0;bottom:0;}.quarter .title{font-size:20px;}@media (max-width: 480px){.quarter .title{top:16px;font-size:16px;}}.quarter .section,.quarter .rubrik{display:none;}.quarter .image-tint-red,.quarter .image-tint-green{-webkit-filter:grayscale;filter:grayscale;position:absolute;top:0;width:100%;height:100%;z-index:1;background-color:rgba(255,0,0,0.3);}.quarter .image-tint-green{background-color:rgba(40,130,30,0.3);}.animate{transform:translateZ(50em);opacity:0;}button{width:200px;height:100px;position:absolute;bottom:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;background:LightSeaGreen;border:none;color:#fff;font-size:22px;border-radius:4px;-webkit-box-shadow:0px 0px 19px 0px rgba(0,0,0,0.75);-moz-box-shadow:0px 0px 19px 0px rgba(0,0,0,0.75);box-shadow:0px 0px 19px 0px rgba(0,0,0,0.75);}.close-btn{visibility:hidden;display:block;position:absolute;right:20px;top:50px;color:rgba(0,0,0,0.6);z-index:9999999999999;border:2px solid rgba(0,0,0,0.6);font-size:30px;width:40px;height:40px;margin-top:-20px;text-align:center;}.close-btn:hover{cursor:pointer;background-color:#fff;}\n\n",b=document.getElementsByTagName("head")[0],c=document.createElement("style");c.setAttribute("type","text/css");var d=document.createTextNode(a);c.styleSheet?c.styleSheet.cssText=d.toString():c.appendChild(d),b.appendChild(c)}(),!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):"object"==typeof exports?exports.Handlebars=b():a.Handlebars=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(){var a=new g.HandlebarsEnvironment;return m.extend(a,g),a.SafeString=i["default"],a.Exception=k["default"],a.Utils=m,a.escapeExpression=m.escapeExpression,a.VM=o,a.template=function(b){return o.template(b,a)},a}var e=c(7)["default"];b.__esModule=!0;var f=c(1),g=e(f),h=c(2),i=e(h),j=c(3),k=e(j),l=c(4),m=e(l),n=c(5),o=e(n),p=c(6),q=e(p),r=d();r.create=d,q["default"](r),r["default"]=r,b["default"]=r,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){this.helpers=a||{},this.partials=b||{},e(this)}function e(a){a.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new k["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse,e=c.fn;if(b===!0)return e(this);if(b===!1||null==b)return d(this);if(o(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):d(this);if(c.data&&c.ids){var g=f(c.data);g.contextPath=i.appendContextPath(c.data.contextPath,c.name),c={data:g}}return e(b,c)}),a.registerHelper("each",function(a,b){function c(b,c,e){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!e,l&&(j.contextPath=l+b)),h+=d(a[b],{data:j,blockParams:i.blockParams([a[b],b],[l+b,null])})}if(!b)throw new k["default"]("Must pass iterator to #each");var d=b.fn,e=b.inverse,g=0,h="",j=void 0,l=void 0;if(b.data&&b.ids&&(l=i.appendContextPath(b.data.contextPath,b.ids[0])+"."),p(a)&&(a=a.call(this)),b.data&&(j=f(b.data)),a&&"object"==typeof a)if(o(a))for(var m=a.length;m>g;g++)c(g,g,g===a.length-1);else{var n=void 0;for(var q in a)a.hasOwnProperty(q)&&(n&&c(n,g-1),n=q,g++);n&&c(n,g-1,!0)}return 0===g&&(h=e(this)),h}),a.registerHelper("if",function(a,b){return p(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||i.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){p(a)&&(a=a.call(this));var c=b.fn;if(i.isEmpty(a))return b.inverse(this);if(b.data&&b.ids){var d=f(b.data);d.contextPath=i.appendContextPath(b.data.contextPath,b.ids[0]),b={data:d}}return c(a,b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)}),a.registerHelper("lookup",function(a,b){return a&&a[b]})}function f(a){var b=i.extend({},a);return b._parent=a,b}var g=c(7)["default"];b.__esModule=!0,b.HandlebarsEnvironment=d,b.createFrame=f;var h=c(4),i=g(h),j=c(3),k=g(j),l="3.0.1";b.VERSION=l;var m=6;b.COMPILER_REVISION=m;var n={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};b.REVISION_CHANGES=n;var o=i.isArray,p=i.isFunction,q=i.toString,r="[object Object]";d.prototype={constructor:d,logger:s,log:t,registerHelper:function(a,b){if(q.call(a)===r){if(b)throw new k["default"]("Arg not supported with multiple helpers");i.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(q.call(a)===r)i.extend(this.partials,a);else{if("undefined"==typeof b)throw new k["default"]("Attempting to register a partial as undefined");this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]}};var s={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(a,b){if("undefined"!=typeof console&&s.level<=a){var c=s.methodMap[a];(console[c]||console.log).call(console,b)}}};b.logger=s;var t=s.log;b.log=t},function(a,b){"use strict";function c(a){this.string=a}b.__esModule=!0,c.prototype.toString=c.prototype.toHTML=function(){return""+this.string},b["default"]=c,a.exports=b["default"]},function(a,b){"use strict";function c(a,b){var e=b&&b.loc,f=void 0,g=void 0;e&&(f=e.start.line,g=e.start.column,a+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,a),i=0;i<d.length;i++)this[d[i]]=h[d[i]];Error.captureStackTrace&&Error.captureStackTrace(this,c),e&&(this.lineNumber=f,this.column=g)}b.__esModule=!0;var d=["description","fileName","lineNumber","message","name","number","stack"];c.prototype=new Error,b["default"]=c,a.exports=b["default"]},function(a,b){"use strict";function c(a){return j[a]}function d(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function e(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function f(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return l.test(a)?a.replace(k,c):a}function g(a){return a||0===a?o(a)&&0===a.length?!0:!1:!0}function h(a,b){return a.path=b,a}function i(a,b){return(a?a+".":"")+b}b.__esModule=!0,b.extend=d,b.indexOf=e,b.escapeExpression=f,b.isEmpty=g,b.blockParams=h,b.appendContextPath=i;var j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},k=/[&<>"'`]/g,l=/[&<>"'`]/,m=Object.prototype.toString;b.toString=m;var n=function(a){return"function"==typeof a};n(/x/)&&(b.isFunction=n=function(a){return"function"==typeof a&&"[object Function]"===m.call(a)});var n;b.isFunction=n;var o=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===m.call(a):!1};b.isArray=o},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=p.COMPILER_REVISION;if(b!==c){if(c>b){var d=p.REVISION_CHANGES[c],e=p.REVISION_CHANGES[b];throw new o["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new o["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){function c(c,d,e){e.hash&&(d=m.extend({},d,e.hash)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;i>h&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new o["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){var c=void 0===arguments[1]?{}:arguments[1],f=c.data;d._setup(c),!c.partial&&a.useData&&(f=j(b,f));var g=void 0,h=a.useBlockParams?[]:void 0;return a.useDepths&&(g=c.depths?[b].concat(c.depths):[b]),a.main.call(e,b,e.helpers,e.partials,f,h,g)}if(!b)throw new o["default"]("No environment passed to template");if(!a||!a.main)throw new o["default"]("Unknown template object: "+typeof a);b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new o["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:m.escapeExpression,invokePartial:c,fn:function(b){return a[b]},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=m.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)))},d._child=function(b,c,d,g){if(a.useBlockParams&&!d)throw new o["default"]("must pass block params");if(a.useDepths&&!g)throw new o["default"]("must pass parent depths");return f(e,b,a[b],c,0,d,g)},d}function f(a,b,c,d,e,f,g){function h(b){var e=void 0===arguments[1]?{}:arguments[1];return c.call(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),g&&[b].concat(g))}return h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a=c.partials[c.name],a}function h(a,b,c){if(c.partial=!0,void 0===a)throw new o["default"]("The partial "+c.name+" could not be found");return a instanceof Function?a(b,c):void 0}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?p.createFrame(b):{},b.root=a),b}var k=c(7)["default"];b.__esModule=!0,b.checkRevision=d,b.template=e,b.wrapProgram=f,b.resolvePartial=g,b.invokePartial=h,b.noop=i;var l=c(4),m=k(l),n=c(3),o=k(n),p=c(1)},function(a,b){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b="undefined"!=typeof c?c:window,d=b.Handlebars;a.noConflict=function(){b.Handlebars===a&&(b.Handlebars=d)}},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b){"use strict";b["default"]=function(a){return a&&a.__esModule?a:{"default":a}},b.__esModule=!0}])}),Widget.prototype.log=function(a){window.console&&window.console.log&&console.log(this.id+" --> "+a)};var WLCM=function(){function init(){function setWidgetInstances(){return _wlcm.instances=$("[data-mnv]"),_wlcm.instances.length}function addWidget(a,b,c){_wlcm.instancesByTypes.hasOwnProperty(a)||(_wlcm.instancesTypes.push(a),_wlcm.instancesByTypes[a]={config:b.config,minerva:b.minerva,instances:[]}),_wlcm.instancesByTypes[a].instances.push(c)}function getWidgetTypes(){}function initWidgetInstances(){_wlcm.instancesByTypes={},_wlcm.instancesTypes=[],_wlcm.instances.each(function(){var id,widgetType,obj;id=$(this).attr("id"),widgetType=$(this).attr("data-mnv");try{obj=new(eval(widgetType))}catch(e){_wlcm.log("No existing class "+id),obj=!1}obj&&(jQuery.extend(obj,{id:id,el:$(this),data:null}),jQuery.data(this,"widget",obj),addWidget(widgetType,obj,this),$(this).trigger("widgetInstanciated"))}),feedWidgetInstances()}function feedWidgetInstances(){for(var i=_wlcm.instancesTypes.length-1;i>=0;i--){var widgetType=_wlcm.instancesTypes[i];if(_wlcm.instancesByTypes.hasOwnProperty(widgetType)){var provider=_wlcm.instancesByTypes[widgetType].config.bundle.data.provider;switch(_wlcm.log("Provider "+provider),provider){case null:_wlcm.log("I will do nothing more ");break;case"inbundle":var d=eval(widgetType+"Data");"undefined"!=typeof d?_wlcm.loadMultipleInstances(d,widgetType):_wlcm.log("var "+widgetType+"Data is undefined, please check "+CONST.data.inbundle.folder,(new Error).lineNumber);break;case"jsonp":_wlcm.readData(widgetType);break;case"json":_wlcm.readData(widgetType)}}}}function prepareURLS(a){var b,c;if(b=_wlcm.instancesByTypes[a].config.bundle,c=_wlcm.instancesByTypes[a].minerva,"undefined"!=typeof b.data.url)_wlcm.log("Data url by config file: "+b.data.url);else{for(var d=["host","version"],e=0;e<d.length;e++){var f=d[e];if("string"!=typeof b.data[f]||!b.data.hasOwnProperty(f))return"The mandatory property "+f+" is missing in data"}var g=CONST.data.defaultDataFile[b.data.provider];b.data.url="http://"+b.data.host+CONST.data.path+c.ns.folder+"/"+b.data.version+"/"+g,_wlcm.log("Data file "+b.data.url)}if("undefined"!=typeof b.assets.url)_wlcm.log("Assets url by config file: "+b.assets.url);else{for(var d=["host","version"],e=0;e<d.length;e++){var f=d[e];if("string"!=typeof b.assets[f]||!b.assets.hasOwnProperty(f))return"The mandatory property "+f+" is missing in assets"}b.assets.url="http://"+b.assets.host+CONST.assets.path+c.ns.folder+"/"+b.assets.version+"/",_wlcm.log("Assets folder "+b.assets.url)}return!0}var CONST={data:{inbundle:{folder:"data/inbundle.json"},path:"/sites/default/files/external/minerva_data/",defaultDataFile:{json:"data.json",jsonp:"data-jsonp.json"}},assets:{path:"/sites/default/files/external/minerva_assets/"}};return{readData:function(a){_wlcm.log("Trying reading data for "+a);var b=prepareURLS(a);if("string"==typeof b)return _wlcm.log("Error preparing the url: "+b+" in your config file",(new Error).lineNumber),!1;var c=_wlcm.instancesByTypes[a].config.bundle.data.url;switch(_wlcm.instancesByTypes[a].config.bundle.data.provider){case"json":$.ajax({global:!1,url:c,dataType:"json",success:function(b){_wlcm.log("Reading successfully "+a),_wlcm.loadMultipleInstances(b,a)},error:function(a,b,c){_wlcm.log(c)}});break;case"jsonp":window[a+"Callback"]=function(b){WLCMI.loadMultipleInstances(b,a)},$.ajax({url:c,jsonp:a+"Callback",dataType:"jsonp",success:function(b){_wlcm.log("Reading successfully "+a)},error:function(a,b,d){_wlcm.log("An error occured reading "+c+" file: "+b),_wlcm.log(d,(new Error).lineNumber)}})}},loadMultipleInstances:function(a,b){for(var c=_wlcm.instancesByTypes[b].instances.length-1;c>=0;c--){var d=_wlcm.instancesByTypes[b].instances[c],e=$(d).attr("id");if(a.hasOwnProperty(e)){var f=$("#"+e);if(f!=[]){var g=f.data("widget");g.data=a[e],jQuery.data(f,"widget",g),_wlcm.log("Sending data to "+e),f.trigger("dataProviding")}else _wlcm.log("Unable to locate "+e)}if(a.hasOwnProperty("data")){a=a.data;var f=$("#"+e),g=f.data("widget");g.data=a,jQuery.data(f,"widget",g),_wlcm.log("Sending data to "+e),f.trigger("dataProviding")}}},getWidgetInstances:function(){return this.setWidgetInstances()},log:function(a,b){console.log("WLCM --> "+a)},start:function(){this.justOneTime!==!0&&(this.setWidgetInstances()>0&&this.initWidgetInstances(),this.justOneTime=!0)},setWidgetInstances:setWidgetInstances,initWidgetInstances:initWidgetInstances}}var _wlcm;return{getInstance:function(){return _wlcm||(_wlcm=init()),_wlcm}}}(),WLCMI=WLCM.getInstance();!function(){var a=Handlebars.template,b=Handlebars.templates=Handlebars.templates||{};b["ec-storytilesreveal"]=a({1:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'      <li class="artical-reveal-tile '+i((f=null!=(f=b.title||(null!=a?a.title:a))?f:g,typeof f===h?f.call(a,{name:"title",hash:{},data:d}):f))+" "+i((f=null!=(f=b.type||(null!=a?a.type:a))?f:g,typeof f===h?f.call(a,{name:"type",hash:{},data:d}):f))+'">\n        <div class="tile-content">\n          <h2 class="section">'+i((f=null!=(f=b.section||(null!=a?a.section:a))?f:g,typeof f===h?f.call(a,{name:"section",hash:{},data:d}):f))+'</h2>\n          <h2 class="title">'+i((f=null!=(f=b.title||(null!=a?a.title:a))?f:g,typeof f===h?f.call(a,{name:"title",hash:{},data:d}):f))+'</h2>\n          <h2 class="rubrik">'+i((f=null!=(f=b.rubrik||(null!=a?a.rubrik:a))?f:g,typeof f===h?f.call(a,{name:"rubrik",hash:{},data:d}):f))+"</h2>\n"+(null!=(e=(b.ifvalue||a&&a.ifvalue||g).call(a,null!=a?a.type:a,{name:"ifvalue",hash:{equals:"quarter"},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+'          <div class="image-grad"></div>\n          <img class="image" src="'+i((f=null!=(f=b.image||(null!=a?a.image:a))?f:g,typeof f===h?f.call(a,{name:"image",hash:{},data:d}):f))+'">\n        </div>\n      </li>\n'},2:function(a,b,c,d){var e;return'          <div class="image-tint-'+this.escapeExpression((e=null!=(e=b.tint||(null!=a?a.tint:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"tint",hash:{},data:d}):e))+'"></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return'<div class="main-container">\n  <div class="close-btn">X</div>\n  <div class="article-container"></div>\n  <div class="article-reveal-container">\n    <ul>\n'+(null!=(e=b.each.call(a,null!=a?a.tile:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"    </ul>\n  </div>\n</div>\n\n\n\n\n\n\n\n\n\n\n\n"},useData:!0})}();var ecStoryTilesRevealConfig={config:{bundle:{assets:{version:"theWorldIf2015001",host:"cdn.static-economist.com"},data:{version:"theWorldIf2015001","url[THIS-OVERWRITE-HOST-IN-JSON-JSONP-BUNDLE]":"http://YOUR-JSON-URL",host:"localhost:3000/projects/ec-storytilesreveal","host[PRODUCTION-RENAME-TO-HOST]":"cdn.static-economist.com",provider:"inbundle"}}},minerva:{name:"StoryTilesReveal",ns:{js:"ecStoryTilesReveal",css:"ec-storytilesreveal",folder:"ec-storytilesreveal"},description:"",version:"0.1.0",debugMode:!0,"private":!0,devDependencies:{bower:"~1.2.7",express:"^4.10.6","express-handlebars":"^1.1.0","express-logger":"0.0.3",grunt:"~0.4.1","grunt-contrib-copy":"^0.8.0","grunt-browser-sync":"^1.5.3","grunt-contrib-concat":"~0.3.0","grunt-contrib-jasmine":"0.5.1","grunt-contrib-jshint":"0.6.4","grunt-contrib-uglify":"~0.2.4","grunt-contrib-watch":"^0.6.1","grunt-githooks":"~0.2.0","grunt-handlebars-compiler":"0.0.7","grunt-sass":"0.6.0","grunt-shell":"~0.5.0","grunt-usemin":"~0.1.12","grunt-criticalcss":"^0.5.0","yeoman-generator":"^0.18.4"},engines:{node:">=0.8.0"}}},ecStoryTilesRevealData={"ec-storytilesreveal-0":{tile:[{section:"cover",title:"This is the cover",rubrik:"Blah blah blah blah...",image:"http://lorempixel.com/640/360/business",type:"cover"},{section:"Science and technology",title:"tile02",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/600/300/people",type:"full"},{section:"Business and finance",title:"tile03",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/600/300/nightlife",type:"full"},{section:"Science and technology",title:"tile04",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/228/176/cats",type:"quarter",tint:"red"},{section:"Science and technology",title:"tile05",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/228/176/city",type:"quarter",tint:"red"},{section:"Science and technology",title:"tile06",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/228/176/animals",type:"quarter",tint:"red"},{section:"Science and technology",title:"tile07",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/228/176/sports",type:"quarter",tint:"red"},{section:"Politics",title:"tile08",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/600/300/business",type:"full"},{section:"Science and technology",title:"tile09",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/600/300/transport",type:"full"},{section:"Science and technology",title:"tile10",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/228/176/food",type:"quarter",tint:"green"},{section:"Science and technology",title:"tile11",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/228/176/fashion",type:"quarter",tint:"green"},{section:"Science and technology",title:"tile12",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/228/176/nature",type:"quarter",tint:"green"},{section:"Science and technology",title:"tile13",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/228/176/transport",type:"quarter",tint:"green"},{section:"Science and technology",title:"tile13",rubrik:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",image:"http://lorempixel.com/600/300/transport",type:"full"}]}};ecStoryTilesReveal.prototype=new Widget,$(document).ready(function(){$("[data-mnv='ecStoryTilesReveal']").on("dataProviding",function(){Handlebars.registerHelper("ifvalue",function(a,b){return a==b.hash.equals?b.fn(this):b.inverse(this)});var a=$.data(this,"widget");a.log("Received data");var b=Handlebars.templates["ec-storytilesreveal"];$(this).html(b(a.data))}),$(document).ready(function(){function a(){for(var a=0;a<=totalOfVals;a++)$(".artical-reveal-tile:eq("+[a]+")").css("transition-delay","0s")}function b(b){"opacity"==b.propertyName&&(console.log("Finished transition!"),f===!0&&(console.log(b),g[0].classList.add("inactive"),h[0].style.visibility="visible",h[0].classList.remove("inactive"),a(),c()))}function c(){j===!0&&($(".article-container").append('<div id="iframe" class="iframe"><iframe src="http://www.economist.com/democracy" width="100%" height="5000px" scrolling="no" frameborder="0"></iframe></div>'),console.log(j),console.log("launching iFrame")),j=!1}function d(){for(var a=0;a<=revNumber.length;a++)$(".artical-reveal-tile:eq("+revNumber[a]+")").toggleClass("animate").css("transition-delay",.2*a+"s")}function e(){for(var a=0;a<=forNumber.length;a++)$(".artical-reveal-tile:eq("+forNumber[a]+")").toggleClass("animate").css("transition-delay",.2*a+"s")}var f,g=document.getElementsByClassName("article-reveal-container"),h=document.getElementsByClassName("close-btn"),i=document.getElementsByClassName("artical-reveal-tile"),j=(document.getElementsByClassName("article-container"),!0);tileTarget=$(".article-reveal-container ul li:last-child"),console.log(tileTarget),tileTarget[0].addEventListener("transitionend",b,!1),tileTarget[0].addEventListener("webkitTransitionEnd",b,!1),tileTarget[0].addEventListener("mozTransitionEnd",b,!1),tileTarget[0].addEventListener("msTransitionEnd",b,!1),tileTarget[0].addEventListener("oTransitionEnd",b,!1),totalOfVals=$(".artical-reveal-tile").length,$(".artical-reveal-tile").bind("click",function(){$(this).toggleClass("animate"),f=!f,f===!1&&g[0].classList.add("active"),indexVal=$(".artical-reveal-tile").index($(this)),revNumber=[],forNumber=[],indexValBelow=indexVal-1;for(var a=indexValBelow;a>=0;a--)revNumber.push(a);for(var a=indexVal+1;a<totalOfVals;a++)forNumber.push(a);d(),e()}),h[0].addEventListener("click",function(){if(this.classList.toggle("inactive"),f===!0){g[0].classList.remove("inactive"),g[0].classList.add("active");for(var a=0;a<=i.length-1;a++)i[a].classList.toggle("animate")}else f===!1&&g[0].classList.remove("active");console.log("articleActive: "+f),f=!f})}),WLCMI.start()});